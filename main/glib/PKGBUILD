# Maintainer: Chris Cromer <chris@cromer.cl>

pkgname=glib
pkgver=2.52.2
_pkgver=${pkgver%.*}
pkgrel=1
pkgdesc='The GLib package contains low-level libraries useful for providing data structure handling for C'
arch=('x86_64')
url='http://www.gtk.org'
license=('LGPL')
depends=('pcre' 'libffi')
makedepends=('libffi' 'python' 'pcre' 'zlib' 'gettext' 'shared-mime-info')
checkdepends=('desktop-file-utils' 'dbus')
source=("http://ftp.gnome.org/pub/gnome/sources/glib/${_pkgver}/glib-${pkgver}.tar.xz")
md5sums=('ec099bce26ce6a85104ed1d89bb45856')

build() {
	cd "$srcdir/$pkgname-$pkgver"
	./configure --prefix=/usr \
		--with-pcre=system \
		--with-python=/usr/bin/python3
	make
}

check() {
	cd "$srcdir/$pkgname-$pkgver"
	make -k check
}

package() {
	cd "$srcdir/$pkgname-$pkgver"
	make DESTDIR="$pkgdir" install
}
